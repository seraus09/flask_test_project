{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% block title %}Ping-Checker{% endblock %}
{% block head %}
{% block styles %}
{{ super() }}
<link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
{% endblock styles %}
{% block scripts %}
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
<script src='https://www.google.com/recaptcha/api.js' async defer></script>
<script> function checkRecaptcha() {
  var response = grecaptcha.getResponse();
  if(response.length == 0) {
    //reCaptcha not verified
    alert("no pass");
  }
  else {
    //reCaptch verified
    alert("pass");
  }
}
</script>
{%- endblock scripts %}
{% endblock %}
{% block page_content  %}
<div class="page-header">
    <h1>Hello</h1>
    <p>The local date and time is {{ moment(current_time).format('LLL') }}.</p>
    <p>Your IP is {{ real_ip }} </p>
</div>

{{ wtf.quick_form(form) }}
{% endblock %}

{% block geo %}
{% if data == None %}
<div class="page-header">
    <table class="table">
                  <tbody>
                    <tr >
                      <th scope="col" style="border-top: 0" >91.201.25.57</th>
                       <td style="border-top: 0">
                           {% if  local  < 4 %}
                               <div style="color:red;"> {{ local }}/4 Packet loss</div>
                           {% else %}
                               <div style="color:green;">{{ local }}/4 ОК</div>
                           {% endif %}
                       </td>
                    </tr>
                    <tr>
                      <th scope="col" style="border-top: 0" >185.250.206.220</th>
                      <td style="border-top: 0">
                          {% if  virt  < 4 %}
                               <div style="color:red;"> {{ virt }} /4 Packet loss</div>
                           {% else %}
                               <div style="color:green;">{{ virt }}/4 ОК</div>
                           {% endif %}
                      </td>
                    </tr>
                    <tr>
                      <th style="border-top: 0" scope="col">35.178.203.123</th>
                      <td style="border-top: 0">{% if  aws  < 4 %}
                               <div style="color:red;"> {{ aws }} /4 Packet loss</div>
                           {% else %}
                               <div style="color:green;">{{ aws }}/4 ОК</div>
                           {% endif %}</td>
                    </tr>

                  </tbody>
                </table>
                </div>
</div>
{% else %}
<div class="page-header">
   <div class="g-recaptcha" data-sitekey="6LcQiuMZAAAAAP_3gu9YVfyfow8HDHAfrbf1g8Xb"></div>
    <script>
        document.getElementById('ping').onclick = function() {
          checkRecaptcha();
        };
        // implement on the backend
        function backend_API_challenge() {
            var response = grecaptcha.getResponse();
            $.ajax({
                type: "POST",
                url: 'https://www.google.com/recaptcha/api/siteverify',
                data: {"secret" : "6LcQiuMZAAAAAODI0Mvm8xkWfxqQcqJreUSDArRC", "response" : response, "remoteip": 'localhost' },
                contentType: 'application/x-www-form-urlencoded',
                success: function(data) { console.log(data); }
            });
        }
    </script>
</div>
{% endif %}
{% endblock %}
